-- se crea rol para el usuario 1
INSERT INTO "ROLE" (ROLEID,DESCRIPTION,NAME) VALUES (1,null,'Super Administrador');

INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'CREAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'BLOQUEAR_OBRERO');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'DEFINIR_VARIABLE_GLOBAL');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'ELIMINAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'CREAR_USUARIO');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'AGREGAR_ETAPAS_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'EDITAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'CONFIRMAR_OBREROS');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (1,'ASIGNAR_OBRA');

-- se crea usuario 1
INSERT INTO "USER" (USERID,DELETED,EMAIL,FIRSTNAME,LASTNAME,PASSWORD,RUT,SALT,STATUS,ROLEID) VALUES 
(1,0,'admin@admin.com','Joseph','O''Shea','$2a$10$4N4FPx/WgAHrqf1BQdEnGO9uSmxtJmACsXKCt/my401iI0QIfzfRW','16127401-1',null,1,1);

-- usuario 2

INSERT INTO "ROLE" (ROLEID,DESCRIPTION,NAME) VALUES (2,null,'Administrador Central');

INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'CREAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'DEFINIR_VARIABLE_GLOBAL');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'ELIMINAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'CREAR_USUARIO');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'EDITAR_OBRA');
INSERT INTO "PERMISSIONS" (ROLEID,ROLE_PERMISSIONS) VALUES (2,'ASIGNAR_OBRA');

INSERT INTO "USER" (USERID,DELETED,EMAIL,FIRSTNAME,LASTNAME,PASSWORD,RUT,SALT,STATUS,ROLEID) VALUES (2,0,'central@magal.cl','ADMIN','CENTRAL','$2a$10$ATilSUkKRngyaz8snVP17OGtVy54ikSqNNEFVXFepHgRtL3iAqhPa','11111111-1',null,1,2);

-- LABORER para test de obtener, crear y modificar
-- id 207
MERGE INTO LABORER (LABORERID,ADDRESS,AFP,COMMUNE,CONTRACTID,DATEADMISSION,DATEBIRTH,DEPENDENTS,FIRSTNAME,ISAPRE,LASTNAME,MARITALSTATUS,MOBILENUMBER,NATIONALITY,PHONE,PHOTO,RUT,SECONDLASTNAME,SECONDNAME,TEAMID,TOWN,WEDGE,BANK) VALUES 
(207,'Edith Madge 0711',4,'La Pintana',null,null,{ts '1959-02-05 00:00:00.0'},1,'Juan',1,'Salas',2,'83697498',1,'61833825','1.JPG','8858100-8','Roa','Francisco',null,'Santo Tomas',40,1);
MERGE INTO LABORER (LABORERID,ADDRESS,AFP,COMMUNE,CONTRACTID,DATEADMISSION,DATEBIRTH,DEPENDENTS,FIRSTNAME,ISAPRE,LASTNAME,MARITALSTATUS,MOBILENUMBER,NATIONALITY,PHONE,PHOTO,RUT,SECONDLASTNAME,SECONDNAME,TEAMID,TOWN,WEDGE,BANK) VALUES 
(208,'El Chilco 14132',1,'La Pintana',null,null,{ts '1987-06-07 00:00:00.0'},0,'Miguel',1,'Fuenzalida',1,'54803265',1,null,'2.JPG','14184926-3','Fernandez','Angel',null,'Jorge Alesandri',41,1);
MERGE INTO LABORER (LABORERID,ADDRESS,AFP,COMMUNE,CONTRACTID,DATEADMISSION,DATEBIRTH,DEPENDENTS,FIRSTNAME,ISAPRE,LASTNAME,MARITALSTATUS,MOBILENUMBER,NATIONALITY,PHONE,PHOTO,RUT,SECONDLASTNAME,SECONDNAME,TEAMID,TOWN,WEDGE,BANK) VALUES 
(209,'Mariano Gomez 1064',4,'Puente Alto',null,null,{ts '1942-08-02 00:00:00.0'},0,'Juvenal',1,'Pe¤a',2,null,1,null,'3.JPG','4912637-9','Urizar','Alfonso',null,'Las Brisas',40,1);
-- agrega un obrero no asociado a obra
MERGE INTO LABORER (LABORERID,ADDRESS,AFP,COMMUNE,CONTRACTID,DATEADMISSION,DATEBIRTH,DEPENDENTS,FIRSTNAME,ISAPRE,LASTNAME,MARITALSTATUS,MOBILENUMBER,NATIONALITY,PHONE,PHOTO,RUT,SECONDLASTNAME,SECONDNAME,TEAMID,TOWN,WEDGE,BANK) VALUES 
(412,'Pasaje Setter 1500',2,'Cerro Navia',null,null,{ts '1975-05-25 00:00:00.0'},1,'Marcelo',1,'Sanchez',2,'96499889',1,'81428942','917.JPG','14523741-6','Sartori','Fabian',null,'El Montijo',41,1);

-- OBRA PARA TEST

-- obra inactiva asociada al usuario 1
insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
VALUES (3,'Av. Las Condes 8798','2332443',0,'Obra Inactiva Usuario 1',2,null);

-- obra inactiva asociada al usuario 1
insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
VALUES (2,'Av. Las Condes 8798','2332443',0,'Obra Inactiva',1,null);

-- obra para probar la generación de jobcode
insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
VALUES (4,'Av. Pajaritos 9934','565643',0,'Edificio Jardines de Olivares',2,null);

-- obra activa asociada al usuario 1
insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
VALUES (1,'Av. Las Condes 8798','2332443',0,'Carolina Rabat 4 Etapa B',1,null);

-- obra inactiva asociada al usuario 1
--insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
---VALUES (5,'Av. Las Condes 8798','2332443',0,'Carolina Rabat 4 Etapa B',2,null);

-- obra inactiva asociada al usuario 1
--insert INTO CONSTRUCTION_SITE (CONSTRUCTION_SITEID,ADDRESS,CODE,DELETED,NAME,STATUS,PERSONINCHARGEID) 
--VALUES (6,'Av. Las Condes 8798','2332443',0,'Carolina Rabat 4 Etapa B',1,null);

-- asocia las obras al usuario 1
insert into "USER_CONSTRUCTIONSITE"(CONSTRUCTION_SITEID,USERID) VALUES
(1,1);
insert into "USER_CONSTRUCTIONSITE"(CONSTRUCTION_SITEID,USERID) VALUES
(3,1);

-- asocia las obras al usuario 2
insert into "USER_CONSTRUCTIONSITE"(CONSTRUCTION_SITEID,USERID) VALUES
(2,2);
insert into "USER_CONSTRUCTIONSITE"(CONSTRUCTION_SITEID,USERID) VALUES
(4,2);

-- ASOCIA EL OBRERO 207 A LA OBRA 1
insert into LABORER_CONSTRUCTIONSITE(LABORER_CONSTRUCTIONSITEID,LABORERID,CONSTRUCTION_SITEID,ACTIVE) VALUES
(1,207,1,1);

insert into LABORER_CONSTRUCTIONSITE(LABORER_CONSTRUCTIONSITEID,LABORERID,CONSTRUCTION_SITEID,ACTIVE) VALUES
(2,209,1,1);

-- Usuario finiquitado en una obra X, debe aparecer en la busqueda de histórico de la obra X 
insert into LABORER_CONSTRUCTIONSITE(LABORER_CONSTRUCTIONSITEID,LABORERID,CONSTRUCTION_SITEID,ACTIVE) VALUES
(3,209,2,0);
-- inserta el contrato respectivo y lo marca como finiquitado
INSERT INTO CONTRACT (CONTRACTID,ACTIVE,FINISHED,CONTRACTDESCRIPTION,JOB,JOBCODE,NAME,SETTLEMENT,STARTDATE,STEP,TERMINATIONDATE,TIMEDURATION,VALUETREATMENT,LABORER_CONSTRUCTIONSITEID) VALUES 
(1,0,1,'',1,186,'Francisco',null,{ts '2015-02-25 23:04:49.802000000'},'Obra Gruesa',{ts '2015-06-25 23:04:49.802000000'},null,null,3);
